<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scrollgame.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scrollgame.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>function eventScrollGame() {
    /** standard canvas and stage variables */
    var canvas;
    var stage;
    /** background image*/
    var bg;
    /** keeps track of player score */
    var score;
    /** stores ship bitmaps */
    var bmpList = [];
    var bitmap;
    /** text display */
    var txt;
    // is the game currently in play?
    var play;
    /** game over text */
    var gameTxt;
    /** the mouse's current target */
    var mouseTarget;
    // is the mouse being clicked?
    var clicked;
    /** initializes the ship game */
    
    canvas = document.getElementById("main");
    stage = new game.getStage();
	score = 0;
	
	canvas.onmousedown = onMouseDown;
	canvas.onmouseup = onMouseUp;
	
	bg = new Image();
	bg.src = "rainforest.jpg";
	bg.onload = setBG;
	
	var toucan = new Image();
	toucan.src = "toucan.png";
	toucan.name = "toucan";
	toucan.onload = createAnimals;
	
	var sheep = new Image();
	sheep.src = "sheep.png";
	sheep.name = "sheep";
	sheep.onload = createAnimals;

    /**
     * @function setBG
     * Sets the background for the mini-game.
     */
    function setBG(event){
        var bgrnd = new createjs.Bitmap(bg);
        stage.addChild(bgrnd);
        stage.update();
        
        txt = new createjs.Text ("Score: 0", "24px Arial", "#000");
        txt.textBaseline="top";
        txt.x = 800;
        txt.y = 20;
        play=true;
        stage.addChild(txt);
    }
    
    /**
     * @function createAnimals
     * Creates animal objects and enables clicking on them.
     */
    function createAnimals(event){
        var image = event.target;
        var container = new createjs.Container();
        stage.addChild(container);
        var l = 4;
        for (var i=0; i&lt;l; i++){
            bitmap = new createjs.Bitmap(image);
            container.addChild(bitmap);
            bitmap.name=image.name;
            resetAnimal(bitmap);
            bitmap.regX = bitmap.image.width/2|0;
            bitmap.regY = bitmap.image.height/2|0;
            bitmap.mouseEnabled = true;
            bmpList.push(bitmap);
        }

        
        createjs.Ticker.addEventListener("tick", tick);
    }
    
    /**
     * @function resetAnimal
     * Places animals randomly into the mini-game to be clicked/not clicked.
     */
    function resetAnimal(animal){
        animal.x = canvas.width + Math.random()*500;
        animal.y = canvas.height * Math.random()|0;
        animal.speed = (Math.random()*8)+6;
    }
    
    /**
     * @function tick
     * Ticker function for animation.
     */
    function tick(){
        /** check for clicking */
        if (!clicked &amp;&amp; stage.mouseX &amp;&amp; stage.mouseY){
            mouseTarget = stage.getObjectUnderPoint(stage.mouseX, stage.mouseY);
        }
        if (clicked &amp;&amp; mouseTarget){
            var tempText = String(mouseTarget.name);
            if (tempText=="sheep"){
                resetAnimal(mouseTarget);
                score-=50;
                if (score &lt; 0){ /** prevent negative score */
                    score = 0;
                }
                clicked=false;
            }
            else if (tempText=="toucan"){
                resetAnimal(mouseTarget);
                score+=50;
                clicked=false;
            }
        }
        /** moving the ships */
        if (play == true){
            var l=bmpList.length;
            for(var i=0; i&lt;l; i++){
                var bmp = bmpList[i];
                if (bmp.x > -200){
                    bmp.x -= bmp.speed;
                }else{
                    if (bmp.name == "toucan"){
                        gameOver();
                        console.log("game over");
                    }
                    else{
                        resetAnimal(bmp);
                    }
                }
            }
        }
        txt.text = "Score: "+score;
        stage.update();
    }
    /**
     * @function gameOver    
     * Ends game and displays "Game Over" text. 
     */
    function gameOver(){
        gameTxt = new createjs.Text("Game Over\n\n", "36px Arial", "#000");
        gameTxt.text += "Click to play again";
        gameTxt.textAlign = "center";
        gameTxt.x = canvas.width/2;
        gameTxt.y = canvas.height/3;
        stage.addChild(gameTxt);
        play=false;
        var l=bmpList.length;
        for(var i=0; i&lt;l; i++){
            var bmp = bmpList[i];
            resetAnimal(bmp);
        }
        stage.update();
        canvas.onclick = game.progress();
        
    }

    /**
     * @function handleClick
     * Handles a click after a game over
     */
    var handleClick = function(){
        canvas.onclick=null;
        stage.removeChild(gameTxt);
        score=0;
        
        play=true;
    }

    /**
     * @function onMouseDown
     * Handles a click down.
     */
    var onMouseDown = function(){
        if(!e){var e = window.event;}
        clicked = true;
    }
    /**
     * @function onMouseUp
     * Handles a click release.
     */
    var onMouseUp = function (){
        clicked = false
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#createAnimalsCreatesanimalobjectsandenablesclickingonthem.">createAnimalsCreates animal objects and enables clicking on them.</a></li><li><a href="global.html#eventScavengerHuntItemgatheringportionofgame.">eventScavengerHuntItem gathering portion of game.</a></li><li><a href="global.html#finishPrivatefunctioncalledbyGame.progress()whentheendofthegameisreachedDoanythingtofinishthegamesuchasannouncethewinner,releaseresources,askifthey'dliketoplayagain,changegraphics,etc...">finishPrivate function called by Game.progress() when the end of the game is reachedDo anything to finish the game such as announce the winner, releaseresources, ask if they'd like to play again, change graphics, etc...</a></li><li><a href="global.html#GameThisisacontainerforasingle-player(fornow),linearstorybasedgame.Agameisseenasaseriesof%2522GameEvents,%2522representedbytheGameEventobject.EachGameEventhastwofunctionpointers,moveFuncandactionFunc.ThefirstismeanttohandlethetransitionbetweenthelastGameEventandthecurrentone.Thesecondismeanttosetupwhatactuallyhappensatthispointinthegame.ThisincludesrenderingshapesandsettingupEventListenersforuserinteraction.Meaning,whatactuallymakesthegameuniqueistheseriesofGameEventsandthecodetheirfunctionpointerspointto.TocreatecustomGameEventobjectsandaddthemtothesequenceofevents,createapriviledgedmemberclass(reallyafunctionobj)toGame.loadStory.Thisobjectshouldcontainconstructorcode,whichwillbetriggeredwhenitisthecurrentGameEvent;eventListenersforuserinteractionandgameprogression,andanyotherdatamembersneededtodowhatyouwantatthatpointinthegame.AlleventListenersshouldbepublicfunctionssuchthatCreateJScanlaunchthem.Now,toassignoneormoreGameEvent'sfunctionpointerstopointtothisnewfunctionobject,simplymaketheassignmentinthebodyofGame.loadStory().Asimpleexampleisprovided.EachGameEventwillhavetotriggerGame.progress()atsomepoint(mostlikelyalistenerfunction)toconcludethecurrentGameEventandtriggerthenextone.ThiswillcontinueuntiltherearenomoreGameEventobjects.PopulateGame.start()andGame.finish()withcodetohandlethebeginningandendingofthegame.">GameThis is a container for a single-player (for now), linear story based game. A game is seen as a series of "Game Events," represented by the GameEvent object.Each GameEvent has two function pointers, moveFunc and actionFunc. The first is meant to handle the transition between the last GameEvent and the current one.The second is meant to setup what actually happens at this point in the game.This includes rendering shapes and setting up EventListeners for user interaction.Meaning, what actually makes the game unique is the series of GameEvents and the codetheir function pointers point to.To create custom GameEvent objects and add them to the sequence of events, createa priviledged member class (really a function obj) to Game.loadStory. This object shouldcontain constructor code, which will be triggered when it is the current GameEvent; eventListeners for user interaction and game progression, and any other data members needed  to dowhat you want at that point in the game. All eventListeners should be public functions such thatCreateJS can launch them.Now, to assign one or more GameEvent's function pointers to point to this new function object,simply make the assignment in the body of Game.loadStory(). A simple example is provided.Each GameEvent will have to trigger Game.progress() at some point (most likely a listener function)to conclude the current GameEvent and trigger the next one. This will continue until there are nomore GameEvent objects. Populate Game.start() and Game.finish() with code to handlethe beginning and ending of the game.</a></li><li><a href="global.html#GAME_WIDTH">GAME_WIDTH</a></li><li><a href="global.html#GameEventAnabstractrepresentationofaneventwithinagame.Thiscouldbeaspotontheboard,aseguetoanotherpartofagame,ananimation,mini-game,etc...">GameEventAn abstract representation of an event within a game. This could be a spot on theboard, a segue to another part of a game, an animation, mini-game, etc...</a></li><li><a href="global.html#gameOverEndsgameanddisplays%2522GameOver%2522text.">gameOver    Ends game and displays "Game Over" text.</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#handleClickHandlesaclickafteragameover">handleClickHandles a click after a game over</a></li><li><a href="global.html#onMouseDownHandlesaclickdown.">onMouseDownHandles a click down.</a></li><li><a href="global.html#onMouseUpHandlesaclickrelease.">onMouseUpHandles a click release.</a></li><li><a href="global.html#PlayerRepresentsaplayerinthegame">PlayerRepresents a player in the game</a></li><li><a href="global.html#resetAnimalPlacesanimalsrandomlyintothemini-gametobeclicked/notclicked.">resetAnimalPlaces animals randomly into the mini-game to be clicked/not clicked.</a></li><li><a href="global.html#setBGSetsthebackgroundforthemini-game.">setBGSets the background for the mini-game.</a></li><li><a href="global.html#singleClick">singleClick</a></li><li><a href="global.html#startMenu">startMenu</a></li><li><a href="global.html#this.getCanvasReturnsareferencetotheunderlyingcanvas">this.getCanvasReturns a reference to the underlying canvas</a></li><li><a href="global.html#this.getCurrentEventReturnsareferencetothecurrentGameEventobject">this.getCurrentEvent  Returns a reference to the current GameEvent object</a></li><li><a href="global.html#this.getCurrentPlayerReceiveareferencetotheplayerwho'sturnitcurrentlyis">this.getCurrentPlayerReceive a reference to the player who's turn it currently is</a></li><li><a href="global.html#this.getIconGetareferencetothePlayer'sEaselJSShapeobject">this.getIconGet a reference to the Player's EaselJS Shape object</a></li><li><a href="global.html#this.getIconGetvisualrepresentationoftheGameEvent,ifany">this.getIconGet visual representation of the GameEvent, if any</a></li><li><a href="global.html#this.getStageGetrootEaselJSDisplayObjectobjectofthegame">this.getStageGet root EaselJS DisplayObject object of the game</a></li><li><a href="global.html#this.globalDataAgenericcontainerforgame-scopedata.Meaning,ifitisneededthroughoutdifferentpartsofthegame,putithere.Ifthedataisneededforonlyonesegment(i.e.,GameEvent),bundleitwiththeobjectpointedtobytheGameEvent'smoveFunc()oractionFunc()member.">this.globalDataA generic container for game-scope data. Meaning, if it is neededthroughout different parts of the game, put it here. If the data isneeded for only one segment (i.e., GameEvent), bundle it with the object pointed toby the GameEvent's moveFunc() or actionFunc() member.</a></li><li><a href="global.html#this.handleDblClickExtendedfunctionthathandlesdoubleclickingontheplayerbyproceedingwiththescavengerhuntportionofthegame.">this.handleDblClickExtended function that handles double clicking on the player by proceeding with the scavenger hunt portion of the game.</a></li><li><a href="global.html#this.loadStoryAssignsGameEventobjectstheircustomcode">this.loadStory Assigns GameEvent objects their custom code</a></li><li><a href="global.html#this.onAnimalExtendedfunctionthathandleswhenscavHuntAnimalcontainerisclickedbyhighlighting%2522Animal%2522button.">this.onAnimalExtended function that handles when scavHuntAnimal container is clicked by highlighting "Animal" button.</a></li><li><a href="global.html#this.onGrowingSeasonExtendedfunctionthathandleswhenscavHuntGrowingSeasoncontainerisclickedbyhighlighting%2522GrowingSeason%2522button.">this.onGrowingSeasonExtended function that handles when scavHuntGrowingSeason container is clicked by highlighting "Growing Season" button.</a></li><li><a href="global.html#this.onLatitudeExtendedfunctionthathandleswhenscavHuntLatitudecontainerisclickedbyhighlighting%2522Latitude%2522button.">this.onLatitudeExtended function that handles when scavHuntLatitude container is clicked by highlighting "Latitude" button.</a></li><li><a href="global.html#this.onOK2ExtendedfunctionthathandleswhenItemInfoOK2isclickedbymovingthedefaulthighlighted/selectedoptiontothefirstbuttonstillavailableifthereareremainingitemsorbyremovingtheinfoContainerandcallinggame.progress().">this.onOK2Extended function that handles when Item Info OK2 is clicked by moving the default highlighted/selected option to the first button still available if there are remaining items or by removing the infoContainer and calling game.progress().</a></li><li><a href="global.html#this.onOKExtendedfunctionthathandleswhenscavengerhuntOKisclickedbydisplayingthecorrespondingiteminfoandremovingtheselecteditemfromavailableoptions.">this.onOKExtended function that handles when scavenger hunt OK is clicked by displaying the corresponding item info and removing the selected item from available options.</a></li><li><a href="global.html#this.onPlantLifeExtendedfunctionthathandleswhenscavHuntPlantLifecontainerisclickedbyhighlighting%2522PlantLife%2522button.">this.onPlantLifeExtended function that handles when scavHuntPlantLife container is clicked by highlighting "Plant Life" button.</a></li><li><a href="global.html#this.onPrecipitationExtendedfunctionthathandleswhenscavHuntPrecipitationcontainerisclickedbyhighlighting%2522Precipitation%2522button.">this.onPrecipitationExtended function that handles when scavHuntPrecipitation container is clicked by highlighting "Precipitation" button.</a></li><li><a href="global.html#this.onStartHandleuserclicking%2522start%2522">this.onStartHandle user clicking "start"</a></li><li><a href="global.html#this.progressThisisthemostimportantfunction.CallingthistransitionstothenextGameEvent.">this.progressThis is the most important function.Calling this transitions to the next GameEvent.</a></li><li><a href="global.html#this.setIconSetareferencetothePlayer'sEaselJSShapeobject">this.setIconSet a reference to the Player's EaselJS Shape object</a></li><li><a href="global.html#this.setIconSetvisualrepresentationoftheGameEvent,ifany">this.setIconSet visual representation of the GameEvent, if any</a></li><li><a href="global.html#this.setStageSetrootEaselJSDisplayObjectobjectofthegame">this.setStageSet root EaselJS DisplayObject object of the game</a></li><li><a href="global.html#this.startCalledtostartthegame.Shouldinitializeandrenderanythingneededtostartthegame.Willreturnwith-1forerrorifaeaselJSstagehasn'tbeenprovidedusingGame.setStage(Stage)">this.startCalled to start the game. Should initialize and render anything needed to startthe game. Will return with -1 for error if a easelJS stage hasn'tbeen provided using Game.setStage(Stage)</a></li><li><a href="global.html#this.transitionMovesfromoneGameEventtotheother,simplytakesawayoldeventListeners">this.transitionMoves from one GameEvent to the other, simply takes away old eventListeners</a></li><li><a href="global.html#this.triggerExecutethecodepointedtobymoveFuncandactionFunc">this.triggerExecute the code pointed to by moveFunc and actionFunc</a></li><li><a href="global.html#this.updateGamePositionProvideanupdatedboardpositiontotheplayer.">this.updateGamePositionProvide an updated board position to the player.</a></li><li><a href="global.html#tickTickerfunctionforanimation.">tickTicker function for animation.</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Dec 08 2016 08:37:36 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
